<!-- Adicionar Dispositivo (apenas Wi-Fi nesta página) -->
<div id="modal-add-device"
     class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
  <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">

    <!-- Header -->
    <div class="p-6 border-b border-slate-200">
      <h2 class="text-2xl font-medium text-slate-900">Adicionar Novo Estendal</h2>
      <p class="text-slate-600 text-sm mt-1">
        Conecte o seu estendal inteligente através da rede Wi-Fi de casa.
      </p>
    </div>

    <!-- Body -->
    <div class="p-6 space-y-6">



      <!-- Nome do dispositivo -->
      <div class="space-y-2">
        <label for="deviceName" class="block font-medium text-slate-900 text-sm">Nome do Dispositivo</label>
        <input id="deviceName" type="text"
               placeholder="Ex: Estendal da Varanda"
               class="w-full px-3 py-2 border border-slate-300 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>


      <!-- Código de emparelhamento -->
      <div class="space-y-2">
          <label for="pairingCode" class="block font-medium text-slate-900 text-sm">
              Código de Emparelhamento
          </label>
          <input id="pairingCode" type="text"
                 placeholder="Ex: ABCD1234"
                 class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          <p class="text-xs text-slate-500">
              Código que vem impresso na etiqueta do dispositivo.
          </p>
      </div>


      <!-- Número de série -->
      <div class="bg-slate-50 border border-slate-200 rounded-lg p-3">
        <p class="text-xs text-slate-600 mb-1">Número de Série</p>
        <input id="serialNumberPreview"
       type="text"
       placeholder="SCL-XXXXXX"
       class="w-full px-3 py-2 border border-slate-300 rounded-lg font-mono">
      </div>

      <div id="device-add-error"
           class="hidden text-xs text-red-600 bg-red-50 border border-red-100 rounded-lg px-3 py-1.5"></div>

      <!-- Botões -->
      <div class="flex gap-3 pt-2">
        <button id="btnCancelAddDevice"
                class="flex-1 px-4 py-2 border border-slate-300 rounded-lg text-slate-700
                       hover:bg-slate-50 transition-all">
          Cancelar
        </button>
        <button id="btnConfirmAddDevice"
                class="flex-1 px-4 py-2 rounded-lg text-white
                       bg-gradient-to-r from-blue-600 to-cyan-600
                       hover:from-blue-700 hover:to-cyan-700 transition-all">
          Conectar Dispositivo
        </button>
      </div>

    </div>
  </div>
</div>

<!-- Detalhes do Dispositivo -->
<div id="modal-device-details"
     class="fixed inset-0 z-40 hidden items-center justify-center bg-slate-900/40 modal-backdrop">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-100">
    <div class="flex items-start justify-between gap-4 mb-4">
      <div>
        <h3 id="modal-device-title" class="text-lg font-semibold text-slate-900">Dispositivo</h3>
        <p class="text-sm text-slate-500 mt-1">Informações do dispositivo ligado.</p>
      </div>
      <button data-close="modal-device-details"
              class="h-8 w-8 rounded-full flex items-center justify-center hover:bg-slate-100">
        <i data-lucide="x" class="w-4 h-4 text-slate-500"></i>
      </button>
    </div>
    <div class="space-y-3 text-sm text-slate-600">
      <p><span class="font-medium">Número de série:</span> <span id="modal-device-serial" class="font-mono text-xs"></span></p>
      <p class="flex items-center gap-2">
        <span class="font-medium">Estado:</span>
        <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium bg-emerald-100 text-emerald-700">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
          Conectado
        </span>
      </p>
      <p><span class="font-medium">Conectado desde:</span> <span id="modal-device-connected-at"></span></p>
    </div>
    <div class="flex justify-between gap-2 pt-4">
      <button id="modal-device-settings"
              class="inline-flex items-center gap-2 rounded-xl border border-slate-200 text-xs font-semibold text-slate-700 px-3 py-1.5 hover:bg-slate-50">
        <i data-lucide="settings" class="w-4 h-4"></i>
        <span>Ver Definições</span>
      </button>
      <button id="modal-device-remove"
              class="inline-flex items-center gap-2 rounded-xl bg-red-600 text-xs font-semibold text-white px-3 py-1.5 hover:bg-red-700">
        <i data-lucide="trash-2" class="w-4 h-4"></i>
        <span>Remover Dispositivo</span>
      </button>
    </div>
  </div>
</div>

<!-- Modal Meteo -->
<div id="modal-weather"
     class="fixed inset-0 z-40 hidden items-center justify-center bg-slate-900/40 modal-backdrop">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl p-6 border border-slate-100 max-h-[90vh] flex flex-col">
    <div class="flex items-start justify-between gap-4 mb-4">
      <div>
        <h3 class="text-lg font-semibold text-slate-900">Previsão Meteorológica</h3>
        <p id="modal-weather-desc" class="text-sm text-slate-500 mt-1">
          Dados meteorológicos detalhados para a região selecionada, Portugal.
        </p>
      </div>
      <button data-close="modal-weather"
              class="h-8 w-8 rounded-full flex items-center justify-center hover:bg-slate-100">
        <i data-lucide="x" class="w-4 h-4 text-slate-500"></i>
      </button>
    </div>
    <div class="bg-gradient-to-r from-primary-600 to-slate-900 rounded-2xl p-4 mb-4 text-white flex flex-wrap gap-4 items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-12 w-12 rounded-2xl bg-white/10 flex items-center justify-center">
          <i id="modal-weather-icon" data-lucide="sun" class="w-7 h-7"></i>
        </div>
        <div>
          <p id="modal-weather-temp" class="text-3xl font-semibold">--°C</p>
          <p id="modal-weather-condition" class="text-sm text-slate-100">--</p>
        </div>
      </div>
      <div class="flex flex-wrap gap-3 text-xs">
        <div class="bg-white/10 rounded-xl px-3 py-2">
          <p class="text-slate-200">Precipitação</p>
          <p id="modal-weather-precip" class="text-sm font-semibold">--%</p>
        </div>
        <div class="bg-white/10 rounded-xl px-3 py-2">
          <p class="text-slate-200">Vento</p>
          <p id="modal-weather-wind" class="text-sm font-semibold">-- km/h</p>
        </div>
      </div>
    </div>
    <div class="flex-1 overflow-y-auto scrollbar-thin">
      <div id="weather-forecast-list" class="space-y-2"></div>
    </div>
    <p class="text-[11px] text-slate-400 mt-4">
      Dados fornecidos pelo Instituto Português do Mar e da Atmosfera (IPMA). Em caso de falha de comunicação, são utilizados dados simulados.
    </p>
  </div>
</div>

<!-- Reset -->
<div id="modal-reset"
     class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/40 modal-backdrop">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-100">
    <div class="flex items-start gap-3 mb-4">
      <div class="h-9 w-9 rounded-full bg-red-100 flex items-center justify-center text-red-500">
        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-slate-900">Reset de Fábrica</h3>
        <p class="text-sm text-slate-500 mt-1">
          Esta ação irá repor todas as definições do dispositivo para os valores de fábrica. O dispositivo será reiniciado e terá de ser configurado novamente. Tem a certeza?
        </p>
      </div>
    </div>
    <div class="flex justify-end gap-2">
      <button data-close="modal-reset"
              class="inline-flex items-center gap-2 rounded-xl border border-slate-200 text-xs font-semibold text-slate-600 px-3 py-1.5 hover:bg-slate-50">
        Cancelar
      </button>
      <button id="confirm-reset"
              class="inline-flex items-center gap-2 rounded-xl bg-red-600 text-xs font-semibold text-white px-3 py-1.5 hover:bg-red-700">
        Confirmar Reset
      </button>
    </div>
  </div>
</div>

<!-- Remover dispositivo -->
<div id="modal-remove"
     class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/40 modal-backdrop">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-100">
    <div class="flex items-start gap-3 mb-4">
      <div class="h-9 w-9 rounded-full bg-red-100 flex items-center justify-center text-red-500">
        <i data-lucide="trash-2" class="w-5 h-5"></i>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-slate-900">Remover Dispositivo</h3>
        <p class="text-sm text-slate-500 mt-1">
          Tem a certeza de que pretende remover este dispositivo? Terá de reconectá-lo novamente para voltar a utilizá-lo.
        </p>
      </div>
    </div>
    <div class="flex justify-end gap-2">
      <button data-close="modal-remove"
              class="inline-flex items-center gap-2 rounded-xl border border-slate-200 text-xs font-semibold text-slate-600 px-3 py-1.5 hover:bg-slate-50">
        Cancelar
      </button>
      <button id="confirm-remove"
              class="inline-flex items-center gap-2 rounded-xl bg-red-600 text-xs font-semibold text-white px-3 py-1.5 hover:bg-red-700">
        Remover
      </button>
    </div>
  </div>
</div>